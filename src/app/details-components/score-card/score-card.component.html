<div fxLayout="column" fxLayoutGap="20px" class="container">

    <div>
        <div class="loading-container" *ngIf="isLoading; else content">
            <div class="spinner-wrapper">
                <mat-spinner diameter="30"></mat-spinner>
            </div>
        </div>
        <ng-template #content>
            <div class="tabs-row">
                <div *ngFor="let summary of summaryDatas[0]?.SDInn" (click)="selectWicketsTab(summary.Ti)"
                    [class.active]="selectedWicketsTab === summary.Ti">{{ summary.Ti }}</div>
            </div>
            <div *ngFor="let summary of summaryDatas[0]?.SDInn">
                <div *ngIf="selectedWicketsTab === summary.Ti" class="table-container">

                    <!-- Stats -->
                    <table mat-table [dataSource]="[summary]" class="table">
                        <ng-container matColumnDef="bColumn">
                            <th mat-header-cell *matHeaderCellDef>Stats</th>
                            <td mat-cell *matCellDef="let stats">
                               <p class="total"> Total: {{ stats.Pt }}/{{ stats.Wk}} ( {{stats.Ov}})</p>
                               <p class="wicket"> Run Rate: {{stats.Rr }}</p>
                               <div class="extras">

                                   <p class="extraTextInit"> Extras: {{stats.Ex }}</p>
                                   <p class="extraText"> B:  {{stats.B }} </p>
                                   <p class="extraText"> LB: {{stats.LB }} </p>
                                   <p class="extraText"> NB: {{stats.NB }} </p>
                                   <p class="extraText"> WD: {{stats.WB }}</p> 
                                   <p class="extraText">  P: {{stats.Pen }}</p>
                               </div>
                            </td>
                        </ng-container>
                        <!-- Columns displayed in the table -->
                        <tr mat-header-row *matHeaderRowDef="['bColumn']"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['bColumn']"></tr>
                    </table>

                    <!-- {{ summary.Ti }} content goes here -->
                    <table mat-table [dataSource]="summary.Bat" class="table">
                        
                        <ng-container matColumnDef="bColumn">
                            <th mat-header-cell *matHeaderCellDef>Batters</th>
                            <td mat-cell *matCellDef="let score">
                               <p class="battername">{{ getBatterByPid(score.Pid)}}</p>
                               <p class="wicket">{{ formatLpTx(score.LpTx, score.Bid, score.Fid) }}</p>
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="rColumn">
                            <th mat-header-cell *matHeaderCellDef>R</th>
                            <td mat-cell *matCellDef="let score" class="run">
                                {{ score.R }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="ballColumn">
                            <th mat-header-cell *matHeaderCellDef >B</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.B }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="4sColumn">
                            <th mat-header-cell *matHeaderCellDef >4s</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.$4 }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="6sColumn">
                            <th mat-header-cell *matHeaderCellDef >6s</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.$6 }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="srColumn">
                            <th mat-header-cell *matHeaderCellDef >S/R</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.Sr }}
                            </td>
                        </ng-container>
                        <!-- Columns displayed in the table -->
                        <tr mat-header-row *matHeaderRowDef="['bColumn', 'rColumn', 'ballColumn', '4sColumn', '6sColumn','srColumn']"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['bColumn', 'rColumn', 'ballColumn', '4sColumn', '6sColumn','srColumn']"></tr>
                    </table>



                    

                    
                    <!-- Bowling -->
                    <table mat-table [dataSource]="summary.Bow" class="table">
                        
                        <ng-container matColumnDef="bColumn">
                            <th mat-header-cell *matHeaderCellDef>Bowling</th>
                            <td mat-cell *matCellDef="let score" class="run">
                               {{ getBatterByPid(score.Pid) }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="oColumn">
                            <th mat-header-cell *matHeaderCellDef>O</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.Ov }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="mColumn">
                            <th mat-header-cell *matHeaderCellDef >M</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.Md }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="rColumn">
                            <th mat-header-cell *matHeaderCellDef >R</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.R }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="wColumn">
                            <th mat-header-cell *matHeaderCellDef >W</th>
                            <td mat-cell *matCellDef="let score" class="run">
                                {{ score.Wk }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="nbColumn">
                            <th mat-header-cell *matHeaderCellDef >NB</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.NB }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="wbColumn">
                            <th mat-header-cell *matHeaderCellDef >WD</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.WB }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="erColumn">
                            <th mat-header-cell *matHeaderCellDef >E/R</th>
                            <td mat-cell *matCellDef="let score" >
                                {{ score.Er }}
                            </td>
                        </ng-container>
                        <!-- Columns displayed in the table -->
                        <tr mat-header-row *matHeaderRowDef="['bColumn', 'oColumn', 'mColumn', 'rColumn', 'wColumn','nbColumn','wbColumn','erColumn']"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['bColumn', 'oColumn', 'mColumn', 'rColumn', 'wColumn','nbColumn','wbColumn','erColumn']"></tr>
                    </table>
                </div>
            </div>
        </ng-template>
    </div>
</div>